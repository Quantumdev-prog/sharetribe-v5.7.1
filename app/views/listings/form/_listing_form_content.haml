- valid_until_msg = @listing.rideshare? ? t('error_messages.listings.departure_time') : t('error_messages.listings.valid_until')
:javascript
  $(document).ready(function() {
  initialize_new_listing_form('#{t('listings.form.listing_images.no_file_selected')}', '#{t('listings.form.listing_images.select_file')}', '#{I18n.locale}', '#{t('error_messages.listings.share_type')}', '#{valid_until_msg}', '#{@listing.rideshare?}', '#{@listing.listing_type == "offer" ? "true" : "false"}');
  });

.grid_16.prefix_4.suffix_4
  #new_listing_form_tabs
    %div{:class => get_new_listing_tab_class("request")} 
      = link_to t('.request_something'), new_listing_path(:type => "request", :category => @listing.category), :remote => :true
    %div{:class => get_new_listing_tab_class("offer")} 
      = link_to t('.offer_something'), new_listing_path(:type => "offer", :category => @listing.category), :remote => :true

.grid_16.prefix_4.suffix_4

  #new_listing_form
    #listing_type_select_icons
      - Listing::VALID_CATEGORIES.each do |category|
        %div{:class => get_type_select_icon_class(category)} 
          = link_to t(".#{category}"), new_listing_path(:type => @listing.listing_type, :category => category), :remote => :true
    
    #listing_required_fields_description
      = t("common.fields_that_are_mandatory")
      
    #new_listing_form_main  
      = form_for @listing, :html => {:multipart => true} do |form|
        = form.error_messages
        - if Listing::VALID_SHARE_TYPES[@listing.listing_type][@listing.category]
          = render :partial => "listings/form/listing_share_type"
        - unless @listing.category.eql?("rideshare")
          = render :partial => "listings/form/listing_title", :locals => { :form => form }
        - if @listing.category.eql?("rideshare")
          = render :partial => "listings/form/listing_origin", :locals => { :form => form }
          = render :partial => "listings/form/listing_destination", :locals => { :form => form } 
          = render :partial => "listings/form/listing_departure_time", :locals => { :form => form }  
        = render :partial => "listings/form/listing_description", :locals => { :form => form }
        = render :partial => "listings/form/listing_tag_list", :locals => { :form => form }
        = render :partial => "listings/form/listing_images", :locals => { :form => form }
        - unless @listing.category.eql?("rideshare")
          = render :partial => "listings/form/listing_valid_until", :locals => { :form => form }
        = render :partial => "listings/form/listing_send_button", :locals => { :form => form }

- ["help_share_type", "help_tags", "help_valid_until"].each do |field|
  = render :partial => "help_texts", :locals => { :field => field }