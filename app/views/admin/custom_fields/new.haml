- content_for :javascript do
  initialize_admin_listing_field_form_view("#{I18n.locale}", "#new_dropdown");
  
- content_for :title_header do
  %h1
    = t("layouts.admin.admin") 
    = "-"
    = t("admin.custom_fields.new.new_listing_field")
  
= render :partial => "layouts/left_hand_navigation", :locals => { :links => admin_links_for(@community) }

.left-navi-section
  #new-field-form.new-field-form
    = form_for @custom_field, :url => admin_custom_fields_path do |form|
      
      = render :partial => "admin/custom_fields/form/field_name", :locals => { :form => form }

      / Field type
      = form.label :type, t("admin.custom_fields.index.field_type")
      .row
        .col-12
          = form.select :type, custom_field_dropdown_options(CustomField::VALID_TYPES)
      
      / Field categories
      - if @current_community.categories.size > 1
        = form.label :category_attributes, t("admin.custom_fields.index.categories")
        .row
          .col-12
            .custom-field-categories-container.clearfix#custom-field-categories-container
              - @current_community.categories.reject { |c| !c.children.empty? }.each do |category|
                .custom-field-categories-checkbox-container
                  = check_box_tag "custom_field[category_attributes][][category_id]", "#{category.id}", @custom_field.categories.include?(category) ? true : false, :id => "#{category.name}_checkbox", :class => "custom-field-category-checkbox"
                  = label_tag "#{category.name}_checkbox", category.display_name, :class => "custom-field-category-checkbox-label"
      - else
        = hidden_field_tag "custom_field[category_attributes][][category_id]", @current_community.categories.first.id
      
      / Field option attributes
      = form.label :option_attributes, t("admin.custom_fields.index.dropdown_options")
      .row
        .col-12
          #options.custom-field-options
            - @custom_field.options.each_with_index do |option, index|
              = render :partial => "new_option", :locals => { :option => option, :index => index }
          = link_to t("admin.custom_fields.index.add_option"), add_option_admin_custom_fields_path, :remote => true, :id => "custom-fields-add-option"
      
        
      = render :partial => "admin/custom_fields/form/buttons", :locals => { :form => form }
  