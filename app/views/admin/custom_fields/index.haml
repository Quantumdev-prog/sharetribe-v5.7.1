- content_for :javascript do
  initialize_admin_listing_fields_view();

- content_for :title_header do
  %h1= t(".listing_fields")
  
= render :partial => "layouts/left_hand_navigation", :locals => { :links => admin_links_for(@community) }

.left-navi-section
  #custom-fields-list
    .row.visible-tablet
      .col-3.custom-fields-list-title
        = t(".field_title")
      .col-3.custom-fields-list-title
        = t(".field_type")
      .col-3.custom-fields-list-title
        = t(".category")
    - @current_community.categories.each do |category|
      - category.custom_fields.each do |custom_field|
        .row
          .col-3
            %span.custom-fields-mobile-list-title.hidden-tablet
              = t(".field_title")
            = custom_field.name(I18n.locale)
          .col-3
            %span.custom-fields-mobile-list-title.hidden-tablet
              = t(".field_type")
            %div
              = custom_field.type
            %div.custom-fields-list-options
              = "(#{custom_field.options.collect { |option| option.title(I18n.locale) }.join(", ")})"
          .col-3
            %span.custom-fields-mobile-list-title.hidden-tablet
              = t(".category")
            = category.name
          .col-3
            %span.custom-fields-mobile-list-title.hidden-tablet
              = t(".actions")
            = link_to admin_custom_field_path(custom_field), :method => :delete, :class => "custom-fields-action-remove" do
              = icon_tag("cross", ["icon-fix"])
            / = link_to t(".list.action.edit")
            / = link_to t(".list.action.up")
            / = link_to t(".list.action.down")

  = link_to t(".add_new_field"), "#", :id => "add-new-field-link"
  #new-field-form.new-field-form
    = form_for @custom_field, :url => admin_custom_fields_path do |form|
      = form.hidden_field :type, :value => "DropdownField"
      = form.label :name_attributes, t(".field_title")
      - available_locales.each do |locale_name, locale_value|
        = fields_for "custom_field[name_attributes][]", CustomFieldName.new do |name_form|
          - if available_locales.size > 1
            .row
              .col-2
                = name_form.label :value, locale_name + ": ", :class => "new-field-name-locale-label"
              .col-10
                = name_form.text_field :value, :class => "new-field-name-locale-text-field"
          - else
            = name_form.text_field :value
          = name_form.hidden_field :locale, :value => locale_value
      
      
      = form.label :type, t(".field_type")
      .row
        = form.select :type, options_for_select(CustomField::VALID_TYPES)
      
      .inline-button-container
        = form.button t(".save")
      .inline-button-container
        %a{:id => "cancel-new-field-link", :class => "cancel-button"}
          .content
            = t(".cancel")