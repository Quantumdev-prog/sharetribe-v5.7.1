- content_for :title_header do
  %h1
    = t("layouts.admin.admin")
    = "-"
    = t(".remove_category")

= render :partial => "layouts/left_hand_navigation", :locals => { :links => admin_links_for(@current_community) }

.left-navi-section
  %h2
    = "Remove category '#{@category.display_name(I18n.locale)}'"

  - if @category.has_subcategories?
    %p
      = "Warning! If you remove the category '#{@category.display_name(I18n.locale)}' the following subcategories will be also deleted:"

      %ul
        - @category.subcategories.collect { |subcategory| subcategory.display_name(I18n.locale) }.each do |subcategory_name|
          %li= subcategory_name

  = form_tag('destroy_and_move', :method => :delete) do

    -if @category.has_own_or_subcategory_listings? || @category.has_own_or_subcategory_custom_fields?

      %p
        %ul
        - if @category.has_own_or_subcategory_listings?
          %li
            = "There are #{@category.own_and_subcategory_listings.count} listings in category '#{@category.display_name(I18n.locale)}' and its subcategories."

        -if @category.has_own_or_subcategory_custom_fields?
          %li
            = "There are #{@category.own_and_subcategory_custom_fields.count} custom field in category '#{@category.display_name(I18n.locale)}' and its subcategories."

      %p
        = "Select a new category where the items listed above will be moved:"

      %p
        = select_tag "new_category", options_for_select(@new_category_candidates.collect { |c| [c.display_name(I18n.locale), c.id] })

    .inline-button-container
      = button_tag t(".remove"), :class => "delete-button"
    .inline-button-container
      %a{:href => admin_categories_path, :class => "cancel-button"}
        .content
          = t(".cancel")